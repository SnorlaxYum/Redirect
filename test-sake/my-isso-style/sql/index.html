<!DOCTYPE html>
<html lang="en">

<head>	<title>Inside The Isso Database - Simputer</title>
	<meta charset=utf-8><link rel=canonical href=https://static.snorl.ax/test-sake/my-isso-style/sql/>	<link href="https://static.snorl.ax/test-sake/theme/css/style.css" rel=stylesheet><link href="https://static.snorl.ax/test-sake/theme/css/inside.css"rel=stylesheet>
	<link href="https://static.snorl.ax/test-sake/theme/images/icon.png" rel=icon>
	<link href="https://static.snorl.ax/test-sake/theme/images/icon-apple.png" rel=apple-touch-icon-precomposed>	<link href="https://static.snorl.ax/test-sake/feeds/all.rss" rel=alternate title="Simputer RSS Feed" type=application/rss+xml>	<meta content="width=device-width" name=viewport></head>

<body>
		<div id=a>
			<header id=c>
				<div id=d>
					<h1 id=e><a href="https://static.snorl.ax/test-sake/">Simputer</a></h1>
				</div>
			</header>
			<div id=f>
				<nav id=h>
						<ul>							<li>
								<a href=https://static.snorl.ax/test-sake/>Home</a>
									</li>									<li>
										<a href="https://static.snorl.ax/test-sake/browser/" >Browser</a>
									</li>									<li>
										<a href="https://static.snorl.ax/test-sake/terminal/" >Terminal</a>
									</li></ul>
				</nav>
				<aside id=j>
					<form action="https://static.snorl.ax/test-sake/search.html" onsubmit="return validateForm(this.elements['q'].value);">
						<input placeholder="Search..."name=q id=tipue_search_input>
					</form>
				</aside></div>
		</div>
		<div id=b>
				<main id=k> 
<article id=m>
<header id="o"><h2 id="p">Inside The Isso Database</h2></header>
<div id=n><table style="float:left; width: 50%; margin:2%">
<tr><td><b>My Isso Style</b></td></tr>
<tr><td>1. <a href="/my-isso-style/installation/">Installation</a></td></tr>
<tr><td>2. <a href="/my-isso-style/config/">Configuration</a></td></tr>
<tr><td style="color:#000; background: #aaa">3. Inside the Database</td></tr>
</table>

<p>Remember the time when the admin interface was not a feature in isso, I submitted two issues in Github: <a href="https://github.com/posativ/isso/issues/264" target="_blank">#264</a>, <a href="https://github.com/posativ/isso/issues/270" target="_blank">#270</a>.<br>
Now looking back, I think that more and more questions alike could be there without a knowledge for the very database file we r using. Thus it's really important to get into it<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>.<br>
Switch to a user with enough permission to the sqlite databse file and get into the directory where there's database file:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>$ su isso</span>
<span class="code-line">$ <span class="nb">cd</span> ~</span>
</pre></div>


<p>It's recommended to backup the database before editing:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>$ cp comments.db comments.db.bak</span>
</pre></div>


<p>Now launch the sqlite3 utility.  </p>
<div class="highlight"><pre><span class="code-line"><span></span>$ sqlite3</span>
</pre></div>


<p>Turn the headers on and attach the database to the variable for editing.  </p>
<div class="highlight"><pre><span class="code-line">sqlite> .headers ON</pre></div>

<div class="highlight"><pre><span class="code-line">sqlite> ATTACH 'comments.db' AS isso;</pre></div>

<p>List the tables.</p>
<div class="highlight"><pre><span class="code-line">sqlite> .tables</pre></div>

<p>The output are three self-explaining table names:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>isso.comments     isso.preferences  isso.threads</span>
</pre></div>


<p>Check the contents in <code>isso.comments</code>:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.comments;</pre></div>

<p>Take a glimpse of a part of them:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>tid|id|parent|created|modified|mode|remote_addr|text|author|email|website|likes|dislikes|voters|notification</span>
<span class="code-line">1|1||1469977655.38995|1469977994.84019|1|104.86.45.0|Goodbye Disqus!  </span>
<span class="code-line">Hello __ISSO__!  </span>
<span class="code-line">It&#39;s really amazing and I could use __MarkDown__ to comment!  </span>
<span class="code-line">__I&#39;m So GLAD To Become an _ISSO USER_!__  </span>
<span class="code-line">BTW, much faster than Disqus!|Sim|sim@snorl.ax||2|0||0</span>
</pre></div>


<p>It's a comment table with columns named <code>tid</code>, <code>id</code>, <code>parent</code>, <code>created</code>, <code>modified</code>, <code>mode</code>, <code>remote_addr</code>, <code>text</code>, <code>author</code>, <code>email</code>, <code>website</code>, <code>likes</code>, <code>dislikes</code>, <code>voters</code>, <code>notification</code>.  </p>
<ul>
<li><code>tid</code>: The id of the thread the comment belongs to.  </li>
<li><code>id</code>: The id of the comment.  </li>
<li><code>parent</code>: If the comment is meant to reply to a comment, then the comment has the id of the comment it's meant to reply to.  </li>
<li><code>created</code>: The time when the comment is created. Stored in Unix Time format.  </li>
<li><code>modified</code>: The time when the comment is modified. Stored in Unix Time format.  </li>
<li><code>mode</code>: 1 if the comment is published. 2 if the comment is waiting for approval.  </li>
<li><code>remote_addr</code>: The IP address of the commenter.  </li>
<li><code>text</code>: The content of the comment.  </li>
<li><code>author</code>: The name of the user. Blank if the user didn't fill in the field.  </li>
<li><code>email</code>: The email of the user. Blank if the user didn't fill in the field.  </li>
<li><code>website</code>: The url of the website of the user. Blank if the user didn't fill in the field.  </li>
<li><code>likes</code>: Likes the comment has received so far.  </li>
<li><code>dislikes</code>: Dislikes the comment has received so far.  </li>
<li><code>voters</code>: The number of voters of the comments.  </li>
<li><code>notification</code>: 1 if the author chose to receive reply notification.  </li>
</ul>
<p>Check the contents in <code>isso.preferences</code>:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.preferences;</pre></div>

<p>Take a glimpse of it:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>key|value</span>
<span class="code-line">session-key|s0394578gjhsa23sadjhg23asxcnjk423xjzg2131xzmjhde</span>
</pre></div>


<p>It's table with a session key. I haven't done anything with it. It might be not much useful in sqlite editing.  </p>
<p>Check the contents in <code>isso.threads</code>:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.threads;</pre></div>

<p>Take a glimpse of a part of them:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>id|uri|title</span>
<span class="code-line">1|/terminal/2016/07/12/start-to-use-isso/|Tried ISSO and......</span>
<span class="code-line">7|/terminal/2016/05/27/make-full-use-of-cloudflare/|Make full use of CloudFlare</span>
<span class="code-line">9|/browser/2016/06/04/panic-at-the-disco-bohemian-rhapsody/|Panic! At The Disco - Bohemian Rhapsody</span>
</pre></div>


<p>It's a thread table with columns named <code>id</code>, <code>uri</code> and <code>title</code>.  </p>
<ul>
<li><code>id</code>: The id of the thread.  </li>
<li><code>uri</code>: The URL of the page the thread serves to.  </li>
<li><code>title</code>: The title of the thread, used in the title of email notification of the thread.</li>
</ul>
<p>The following examples might help.   </p>
<h2 id="ex1">Ex 1: Delete Comments</h2>

<p>In the examples above, the contents in <code>isso.comments</code> was checked:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.comments;</pre></div>

<p>Take a glimpse of a part of them:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>tid|id|parent|created|modified|mode|remote_addr|text|author|email|website|likes|dislikes|voters|notification</span>
<span class="code-line">1|1||1469977655.38995|1469977994.84019|1|104.86.45.0|Goodbye Disqus!  </span>
<span class="code-line">Hello __ISSO__!  </span>
<span class="code-line">It&#39;s really amazing and I could use __MarkDown__ to comment!  </span>
<span class="code-line">__I&#39;m So GLAD To Become an _ISSO USER_!__  </span>
<span class="code-line">BTW, much faster than Disqus!|Sim|sim@snorl.ax||2|0||0</span>
<span class="code-line">7|2||1470373481.55917||1|54.210.166.0|nice blog i like it||||0|0||0</span>
</pre></div>


<p>Suppose I'm gonna delete the first comment in the table, that's all I have to do:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE id=1;</pre></div>

<p>To deal similar things with the author Sim, check with care first, to simplify the thngs, only show the column I need:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT id, author, text FROM isso.comments WHERE author='Sim';</pre></div>

<p>A part of the output:  </p>
<div class="highlight"><pre><span class="code-line"></span>
<span class="code-line">id|author|text</span>
<span class="code-line">8|Sim|&lt;p&gt;It depends.If u prefer a FBI icon,just do it!&lt;/p&gt;</span>
<span class="code-line">12|Sim|&lt;p&gt;It's not easy to keep balanced diet&lt;/p&gt;</span>
</pre></div>

<p>To delete the first comment of the table:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE id=8;</pre></div>

<p>To delete all of Sim's comments:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE author='Sim';</pre></div>

<p>To delete all of Anonymous user's comments:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE author IS NULL;</pre></div>

<p>To delete the comments whose <code>id</code> are between 1 and 7 (1 and 7 included):  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE id>=1 AND id<=7;</pre></div>

<p>To delete the comment of which <code>id</code> is 1 or 7:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE id==1 AND id==7;</pre></div>

<h2 id="ex2">Ex 2: Approve Comments</h2>

<p>This can be useful when u r not able to receive the moderation link via email.<br>
To check all the comments under approval in sqlite:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT id,author,text FROM isso.comments WHERE mode=2;</pre></div>

<p>The output:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>id|author|text</span>
<span class="code-line">72|Sim|Test</span>
<span class="code-line">73|Sim|Test</span>
</pre></div>


<p>To publish the first comment:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> UPDATE isso.comments SET mode=1 WHERE id=72;</pre></div>

<p>To publish all the comments waiting for approval:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> UPDATE isso.comments SET mode=1 WHERE mode=2;</pre></div>

<p>To delete all the comments waiting for approval:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE mode=2;</pre></div>

<h2 id="ex3">Ex 3: Delete And Update Threads</h2>

<p>To check the threads:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.threads;</pre></div>

<p>Take a glimpse of a part of them:  </p>
<div class="highlight"><pre><span class="code-line"><span></span>id|uri|title</span>
<span class="code-line">1|/terminal/2016/07/12/start-to-use-isso/|Tried ISSO and......</span>
<span class="code-line">7|/terminal/2016/05/27/make-full-use-of-cloudflare/|Make full use of CloudFlare</span>
<span class="code-line">9|/browser/2016/06/04/panic-at-the-disco-bohemian-rhapsody/|Panic! At The Disco - Bohemian Rhapsody</span>
</pre></div>


<p>To delete the first thread:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.threads WHERE id=1;</pre></div>

<p>To delete the comments to the first thread:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.comments WHERE tid=1;</pre></div>

<p>To move the comments of the first thread to the second one:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> UPDATE isso.comments SET tid=7 WHERE tid=1;</pre></div>

<p>To check all the threads whose url start with <code>/terminal</code>:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> SELECT * FROM isso.threads WHERE uri LIKE '/terminal%';</pre></div>

<p>To delete all the threads whose url start with <code>/terminal</code>:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> DELETE FROM isso.threads WHERE uri LIKE '/terminal%';</pre></div>

<p>To edit the url the third thread is shown on:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> UPDATE isso.threads SET uri='/the/path/to/it/' WHERE id=9;</pre></div>

<p>To edit the third thread's title:  </p>
<div class="highlight"><pre><span class="code-line">sqlite> UPDATE isso.threads SET title='The new title' WHERE id=9;</pre></div>

<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://www.tutorialspoint.com/sqlite/index.htm" target="_blank">SQLite Tutorial - tutorialspoint</a>&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
</article>
<article id=m>
<div id=n>
<section id="comments"data-title="Inside The Isso Database"data-isso-id="/my-isso-style/sql/">
</section>
</div>
</article>
</main>
		</div>
		<footer id=g>
			<div id=l>Simputer &#169; 2016 - 2019 (<a href="/archives/">Archives</a>) • Licensed under <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a><br>Made using <a href="http://getpelican.com/" target="_blank">Pelican</a> • Design from <a href="https://wordpress.org/themes/twentyfifteen/" target="_blank">TwentyFifteen</a>
			</div>
		</footer>
<script data-isso="https://isso.snorl.ax/"data-isso-gravatar="true"data-isso-avatar="false"data-isso-reply-notifications="true"data-isso-reply-to-self="true"data-isso-css="false"src="https://static.snorl.ax/test-sake/theme/js/embed.min.js"data-isso-lang=en></script>
